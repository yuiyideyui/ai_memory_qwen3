<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AI 屋子管理系统</title>
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>🏠 AI 屋子管理系统</h1>
    <p>**操作提示:** 1. 在地图上点击设置您的位置（👤） -> 2. 点击 **保存用户位置** -> 3. 输入角色名后点击 **添加角色**。</p>

    <div class="container">
        <div class="left-panel">
            <div id="room-container">
                <canvas id="roomCanvas" width="800" height="600"></canvas>
                <div id="room"></div>
            </div>

            <div id="roleInfo">
                <p><strong>角色:</strong> <span id="infoRoleName"></span></p>
                <p><strong>坐标:</strong> <span id="infoPosition"></span></p>
                <p><strong>活动:</strong> <span id="infoActivity"></span></p>
            </div>

            <div class="control-group">
                <h3>🗣️ 聊天区</h3>
                <label for="chatMessage">输入消息:</label>
                <input type="text" id="chatMessage" placeholder="与附近的 AI 角色交流..." autocomplete="off">
                <button id="sendChatBtn" disabled>发送消息</button>
            </div>
        </div>

        <div class="right-panel">
            <div class="control-group">
                <h3>🤖 角色管理</h3>
                <label for="userNameInput">用户名称:</label>
                <input type="text" id="userNameInput" value="user">

                <label>用户位置 (点击地图设置):</label>
                <p id="userPosition" style="font-weight: bold;">(100, 100) 默认</p>
                <button id="saveUserBtn" disabled>保存用户位置</button>
                <hr style="margin: 10px 0;">

                <label for="newRoleName">新角色名称:</label>
                <input type="text" id="newRoleName" placeholder="例如: 妈妈/AI小李">
                <button id="addRoleBtn">添加角色</button>
                <button id="clearRoomBtn" style="background-color: #dc3545; margin-top: 10px;">清空AI角色</button>
            </div>

            <div class="control-group">
                <h3>⏱️ 时间控制</h3>
                <label for="currentTime">当前虚拟时间:</label>
                <p id="currentTime" style="font-weight: bold;">--/--</p>
                
                <label for="timeAcceleration">加速倍率 (1-1000x):</label>
                <input type="number" id="timeAcceleration" value="60" min="1" max="1000">
                <button id="startTimeBtn">启动时间加速</button>
                <button id="stopTimeBtn" disabled style="background-color: #ffc107;">停止时间</button>
            </div>

            <div class="control-group">
                <h3>📜 实时日志</h3>
                <div id="chatLog"></div>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>